{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/victor/Desktop/dev/cade-meu-bloco/components/leaflet-map.tsx"],"sourcesContent":["// components/leaflet-map.tsx\n\"use client\"\n\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\"\nimport L from \"leaflet\"\nimport \"leaflet/dist/leaflet.css\"\nimport { useEffect } from \"react\"\n\n// Fix para ícones do Leaflet no Next.js\nconst createIcon = (isLive: boolean) => {\n    return L.divIcon({\n        className: \"custom-marker\",\n        html: `\n      <div class=\"relative flex items-center justify-center\">\n        ${isLive ? '<div class=\"absolute w-12 h-12 rounded-full bg-orange-500/30 animate-ping\"></div>' : ''}\n        <div class=\"relative w-10 h-10 rounded-full ${isLive ? 'bg-orange-500' : 'bg-zinc-600'} flex items-center justify-center shadow-lg border-2 border-zinc-900\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"${isLive ? '#1a1a1a' : '#a1a1aa'}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <path d=\"M9 18V5l12-2v13\"/>\n            <circle cx=\"6\" cy=\"18\" r=\"3\"/>\n            <circle cx=\"18\" cy=\"16\" r=\"3\"/>\n          </svg>\n        </div>\n      </div>\n    `,\n        iconSize: [48, 48],\n        iconAnchor: [24, 24],\n    })\n}\n\nconst userIcon = L.divIcon({\n    className: \"custom-marker\",\n    html: `\n    <div class=\"relative flex items-center justify-center\">\n      <div class=\"absolute w-8 h-8 rounded-full bg-cyan-500/30 animate-ping\"></div>\n      <div class=\"relative w-6 h-6 rounded-full bg-cyan-500 border-2 border-zinc-900 flex items-center justify-center\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#1a1a1a\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <polygon points=\"3 11 22 2 13 21 11 13 3 11\"/>\n        </svg>\n      </div>\n    </div>\n  `,\n    iconSize: [32, 32],\n    iconAnchor: [16, 16],\n})\n\ninterface Stage {\n    id: string\n    name: string\n    genre: string\n    currentArtist: string\n    location: { lat: number; lng: number }\n    friendsCount: number\n    isLive: boolean\n}\n\ninterface LeafletMapProps {\n    stages: Stage[]\n    userLocation: { lat: number; lng: number }\n    selectedStage: string | null\n    onSelectStage: (id: string | null) => void\n}\n\nfunction MapController({ selectedStage, stages }: { selectedStage: string | null, stages: Stage[] }) {\n    const map = useMap()\n\n    useEffect(() => {\n        if (selectedStage) {\n            const stage = stages.find(s => s.id === selectedStage)\n            if (stage) {\n                map.flyTo([stage.location.lat, stage.location.lng], 16, { duration: 0.5 })\n            }\n        }\n    }, [selectedStage, stages, map])\n\n    return null\n}\n\nexport function LeafletMap({ stages, userLocation, selectedStage, onSelectStage }: LeafletMapProps) {\n    return (\n        <MapContainer\n            center={[userLocation.lat, userLocation.lng]}\n            zoom={15}\n            className=\"w-full h-full\"\n            zoomControl={false}\n        >\n            <TileLayer\n                attribution='&copy; <a href=\"https://carto.com/\">CARTO</a>'\n                url=\"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\"\n            />\n\n            <MapController selectedStage={selectedStage} stages={stages} />\n\n            {/* Markers dos blocos */}\n            {stages.map((stage) => (\n                <Marker\n                    key={stage.id}\n                    position={[stage.location.lat, stage.location.lng]}\n                    icon={createIcon(stage.isLive)}\n                    eventHandlers={{\n                        click: () => onSelectStage(stage.id === selectedStage ? null : stage.id),\n                    }}\n                >\n                    <Popup className=\"dark-popup\">\n                        <div className=\"font-semibold\">{stage.name}</div>\n                        <div className=\"text-sm text-gray-400\">{stage.currentArtist}</div>\n                    </Popup>\n                </Marker>\n            ))}\n\n            {/* Marker do usuário */}\n            <Marker position={[userLocation.lat, userLocation.lng]} icon={userIcon}>\n                <Popup>Você está aqui</Popup>\n            </Marker>\n        </MapContainer>\n    )\n}"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;AAG7B;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;;;AALA;;;;;AAOA,wCAAwC;AACxC,MAAM,aAAa,CAAC;IAChB,OAAO,+JAAC,CAAC,OAAO,CAAC;QACb,WAAW;QACX,MAAM,CAAC;;QAEP,EAAE,SAAS,sFAAsF,GAAG;oDACxD,EAAE,SAAS,kBAAkB,cAAc;iHACkB,EAAE,SAAS,YAAY,UAAU;;;;;;;IAO9I,CAAC;QACG,UAAU;YAAC;YAAI;SAAG;QAClB,YAAY;YAAC;YAAI;SAAG;IACxB;AACJ;AAEA,MAAM,WAAW,+JAAC,CAAC,OAAO,CAAC;IACvB,WAAW;IACX,MAAM,CAAC;;;;;;;;;EAST,CAAC;IACC,UAAU;QAAC;QAAI;KAAG;IAClB,YAAY;QAAC;QAAI;KAAG;AACxB;AAmBA,SAAS,cAAc,EAAE,aAAa,EAAE,MAAM,EAAqD;;IAC/F,MAAM,MAAM,IAAA,6JAAM;IAElB,IAAA,0KAAS;mCAAC;YACN,IAAI,eAAe;gBACf,MAAM,QAAQ,OAAO,IAAI;qDAAC,CAAA,IAAK,EAAE,EAAE,KAAK;;gBACxC,IAAI,OAAO;oBACP,IAAI,KAAK,CAAC;wBAAC,MAAM,QAAQ,CAAC,GAAG;wBAAE,MAAM,QAAQ,CAAC,GAAG;qBAAC,EAAE,IAAI;wBAAE,UAAU;oBAAI;gBAC5E;YACJ;QACJ;kCAAG;QAAC;QAAe;QAAQ;KAAI;IAE/B,OAAO;AACX;GAbS;;QACO,6JAAM;;;KADb;AAeF,SAAS,WAAW,EAAE,MAAM,EAAE,YAAY,EAAE,aAAa,EAAE,aAAa,EAAmB;IAC9F,qBACI,6LAAC,0KAAY;QACT,QAAQ;YAAC,aAAa,GAAG;YAAE,aAAa,GAAG;SAAC;QAC5C,MAAM;QACN,WAAU;QACV,aAAa;;0BAEb,6LAAC,oKAAS;gBACN,aAAY;gBACZ,KAAI;;;;;;0BAGR,6LAAC;gBAAc,eAAe;gBAAe,QAAQ;;;;;;YAGpD,OAAO,GAAG,CAAC,CAAC,sBACT,6LAAC,8JAAM;oBAEH,UAAU;wBAAC,MAAM,QAAQ,CAAC,GAAG;wBAAE,MAAM,QAAQ,CAAC,GAAG;qBAAC;oBAClD,MAAM,WAAW,MAAM,MAAM;oBAC7B,eAAe;wBACX,OAAO,IAAM,cAAc,MAAM,EAAE,KAAK,gBAAgB,OAAO,MAAM,EAAE;oBAC3E;8BAEA,cAAA,6LAAC,4JAAK;wBAAC,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CAAiB,MAAM,IAAI;;;;;;0CAC1C,6LAAC;gCAAI,WAAU;0CAAyB,MAAM,aAAa;;;;;;;;;;;;mBAT1D,MAAM,EAAE;;;;;0BAerB,6LAAC,8JAAM;gBAAC,UAAU;oBAAC,aAAa,GAAG;oBAAE,aAAa,GAAG;iBAAC;gBAAE,MAAM;0BAC1D,cAAA,6LAAC,4JAAK;8BAAC;;;;;;;;;;;;;;;;;AAIvB;MAtCgB"}}]
}